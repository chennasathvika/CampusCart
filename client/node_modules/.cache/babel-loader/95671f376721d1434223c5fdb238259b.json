{"ast":null,"code":"import _classCallCheck from \"D:\\\\CampusCart\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\CampusCart\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\CampusCart\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\CampusCart\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\CampusCart\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\CampusCart\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\CampusCart\\\\client\\\\src\\\\components\\\\HomeNav\\\\HomeNav.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { authorize } from './../../utils/authorize';\nimport { logInUser as _logInUser, logOutUser as _logOutUser } from './../../actions/userActions';\nimport './styles.css';\nimport axios from 'axios';\nvar HomeNav = /*#__PURE__*/function (_Component) {\n  _inherits(HomeNav, _Component);\n  function HomeNav() {\n    var _getPrototypeOf2;\n    var _this;\n    _classCallCheck(this, HomeNav);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(HomeNav)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      nofNotifications: 0,\n      notifications: [],\n      notificationsAvailable: false,\n      seenNotifications: false,\n      status: ['active', '', '', '', '']\n    };\n    _this.logOut = function (e) {\n      e.preventDefault();\n      localStorage.removeItem('access_token');\n      _this.props.logOutUser();\n      _this.props.history.push('/login');\n    };\n    _this.getNotificationText = function (notification) {\n      if (notification.type === 'INTEREST') {\n        return /*#__PURE__*/React.createElement(Link, {\n          to: {\n            pathname: '/sell',\n            state: {\n              key: 2\n            }\n          },\n          className: \"notification-element\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification-wrapper\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }\n        }, notification.sourceUsername), \" is interested in your item \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 87\n          }\n        }, notification.productName), /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 130\n          }\n        }), /*#__PURE__*/React.createElement(\"small\", {\n          className: \"text-muted\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }\n        }, _this.calcTime(notification.timeStamp))));\n      } else if (notification.type === 'COMMENT') {\n        return /*#__PURE__*/React.createElement(Link, {\n          to: \"\",\n          className: \"notification-element\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification-wrapper\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }\n        }, notification.sourceUsername), \" commented on your item \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 83\n          }\n        }, notification.productName), \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 127\n          }\n        }), /*#__PURE__*/React.createElement(\"small\", {\n          className: \"text-muted\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }\n        }, _this.calcTime(notification.timeStamp))));\n      } else if (notification.type === 'STATUS UPDATE') {\n        return /*#__PURE__*/React.createElement(Link, {\n          to: {\n            pathname: '/user',\n            state: {\n              key: 4\n            }\n          },\n          className: \"notification-element\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification-wrapper\",\n          onClick: _this.directUser,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }\n        }, notification.sourceUsername + \"'s\"), \" item \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 72\n          }\n        }, notification.productName), \" is now  \", /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 124\n          }\n        }, notification.payload.status.toLowerCase(), \" \"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 186\n          }\n        }), /*#__PURE__*/React.createElement(\"small\", {\n          className: \"text-muted\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }\n        }, _this.calcTime(notification.timeStamp))));\n      } else if (notification.type === 'SHARE CONTACT') {\n        return /*#__PURE__*/React.createElement(Link, {\n          to: {\n            pathname: '/user',\n            state: {\n              key: 4\n            }\n          },\n          className: \"notification-element\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"notification-wrapper\",\n          onClick: _this.directUser,\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }\n        }, notification.sourceUsername), \" has shared contact \", /*#__PURE__*/React.createElement(\"br\", {\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 79\n          }\n        }), /*#__PURE__*/React.createElement(\"small\", {\n          className: \"text-muted\",\n          __self: _assertThisInitialized(_assertThisInitialized(_this)),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }\n        }, _this.calcTime(notification.timeStamp))));\n      }\n      return 'NA';\n    };\n    _this.notificationHandler = function (e) {\n      if (_this.state.seenNotifications) {\n        return;\n      }\n      axios.get('/notify/seen', {\n        params: {\n          username: _this.props.user.username\n        }\n      });\n    };\n    return _this;\n  }\n  _createClass(HomeNav, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      if (!this.props.userLoggedIn) {\n        var token = localStorage.getItem('access_token');\n        authorize(token).then(function (result) {\n          if (result.success) {\n            axios.get('/notify/notifications', {\n              params: {\n                username: result.user.username\n              }\n            }).then(function (res) {\n              var cnt = 0;\n              var notifications = res.data;\n              for (var i = 0; i < notifications.length; i++) {\n                if (!notifications[i].seenStatus) {\n                  cnt++;\n                }\n              }\n              _this2.setState({\n                notifications: res.data,\n                notificationsAvailable: true,\n                nofNotifications: cnt\n              });\n            });\n            _this2.props.logInUser(result.user);\n          } else {\n            if (result.remove) {\n              localStorage.removeItem('access_token');\n            }\n            _this2.props.history.push('/login');\n          }\n        });\n      } else {\n        axios.get('/notify/notifications', {\n          params: {\n            username: this.props.user.username\n          }\n        }).then(function (res) {\n          var cnt = 0;\n          var notifications = res.data;\n          for (var i = 0; i < notifications.length; i++) {\n            if (!notifications[i].seenStatus) {\n              cnt++;\n            }\n          }\n          _this2.setState({\n            notifications: res.data,\n            notificationsAvailable: true,\n            nofNotifications: cnt\n          });\n        });\n      }\n      var key = this.props.location.state ? this.props.location.state.key : 0;\n      var status = [];\n      for (var i = 0; i < 5; i++) {\n        if (i == key) {\n          status.push('active');\n        } else {\n          status.push('');\n        }\n      }\n      this.setState({\n        status: status\n      });\n    }\n  }, {\n    key: \"calcTime\",\n    value: function calcTime(timestamp) {\n      var x = new Date(timestamp);\n      var y = new Date();\n      var diff = y.getTime() / 1000 - x.getTime() / 1000;\n      var val;\n      if (diff < 3600) {\n        val = parseInt(diff / 60);\n        if (val != 1) return val + ' minutes ago';else return val + ' minute ago';\n      }\n      if (diff < 86400) {\n        val = parseInt(diff / 3600);\n        if (val != 1) return val + ' hours ago';else return val + ' hour ago';\n      } else {\n        val = parseInt(diff / 86400);\n        if (val != 1) return val + ' days ago';else return val + ' day ago';\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      var notifications = this.state.notificationsAvailable ? this.state.notifications.map(function (notification, index) {\n        var unseen = notification.seenStatus ? '' : 'unseen';\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: index,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"dropdown-divider\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"dropdown-item notification-item\" + \" \" + unseen,\n          type: \"button\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 13\n          }\n        }, _this3.getNotificationText(notification)));\n      }) : '';\n      // Default content when no notification is present\n      if (notifications && notifications.length === 0) {\n        notifications.push( /*#__PURE__*/React.createElement(\"div\", {\n          key: \"0\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"dropdown-divider\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 11\n          }\n        }), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"dropdown-item notification-item\",\n          type: \"button\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"strong\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }\n        }, \"No Notifications to show!\"))));\n      }\n      return /*#__PURE__*/React.createElement(\"nav\", {\n        className: \"navbar navbar-expand-sm bg-dark navbar-dark sticky-top\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"navbar-toggler\",\n        type: \"button\",\n        \"data-toggle\": \"collapse\",\n        \"data-target\": \"#navbarToggler\",\n        \"aria-controls\": \"navbarTogglerDemo03\",\n        \"aria-expanded\": \"false\",\n        \"aria-label\": \"Toggle navigation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"navbar-toggler-icon\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://img.icons8.com/nolan/70/000000/shopping-cart.png\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"logoname\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 9\n        }\n      }, \"CampusCart\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"collapse navbar-collapse\",\n        id: \"navbarToggler\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"ul\", {\n        className: \"navbar-nav homenav\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item \" + this.state.status[0],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/\",\n          state: {\n            key: 0\n          }\n        },\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 15\n        }\n      }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item \" + this.state.status[1],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/buy\",\n          state: {\n            key: 1\n          }\n        },\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 15\n        }\n      }, \"Buy\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item \" + this.state.status[2],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/sell\",\n          state: {\n            key: 2\n          }\n        },\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 15\n        }\n      }, \"Sell\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item \" + this.state.status[3],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/requirements\",\n          state: {\n            key: 3\n          }\n        },\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 15\n        }\n      }, \"Requirements\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item \" + this.state.status[4],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: {\n          pathname: \"/user\",\n          state: {\n            key: 4\n          }\n        },\n        className: \"nav-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }, \"User\")), /*#__PURE__*/React.createElement(\"li\", {\n        className: \"nav-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"a\", {\n        className: \"nav-link\",\n        href: \"\",\n        onClick: this.logOut,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }\n      }, \"Logout\"), \" \"), /*#__PURE__*/React.createElement(\"li\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dropdown\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-dark dropdown-toggle notification-dropdown-button\",\n        type: \"button\",\n        \"data-toggle\": \"dropdown\",\n        \"aria-haspopup\": \"true\",\n        \"aria-expanded\": \"false\",\n        onClick: this.notificationHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"https://img.icons8.com/color/32/000000/appointment-reminders.png\",\n        className: \"bell-img\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 19\n        }\n      }), \"(\", this.state.nofNotifications, \")\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dropdown-menu notification-dropdown\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"dropdown-header notification-item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 19\n        }\n      }, \"Notifications\"), notifications))))));\n    }\n  }]);\n  return HomeNav;\n}(Component);\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userLoggedIn: state.userLoggedIn,\n    user: state.user\n  };\n};\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    logInUser: function logInUser(user) {\n      dispatch(_logInUser(user)); // calling a dispatch action\n    },\n    logOutUser: function logOutUser() {\n      dispatch(_logOutUser());\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(HomeNav));","map":{"version":3,"names":["React","Component","Link","withRouter","connect","authorize","logInUser","logOutUser","axios","HomeNav","_Component","_inherits","_getPrototypeOf2","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_possibleConstructorReturn","_getPrototypeOf","call","apply","concat","state","nofNotifications","notifications","notificationsAvailable","seenNotifications","status","logOut","e","preventDefault","localStorage","removeItem","props","history","push","getNotificationText","notification","type","createElement","to","pathname","key","className","__self","_assertThisInitialized","__source","fileName","_jsxFileName","lineNumber","columnNumber","sourceUsername","productName","calcTime","timeStamp","onClick","directUser","payload","toLowerCase","notificationHandler","get","params","username","user","_createClass","value","componentDidMount","_this2","userLoggedIn","token","getItem","then","result","success","res","cnt","data","i","seenStatus","setState","remove","location","timestamp","x","Date","y","diff","getTime","val","parseInt","render","_this3","map","index","unseen","src","id","href","mapStateToProps","mapDispatchToProps","dispatch"],"sources":["D:/CampusCart/client/src/components/HomeNav/HomeNav.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { authorize } from './../../utils/authorize'\r\nimport { logInUser, logOutUser } from './../../actions/userActions';\r\nimport './styles.css';\r\nimport axios from 'axios';\r\n\r\nclass HomeNav extends Component {\r\n\r\n  state = {\r\n    nofNotifications: 0,\r\n    notifications: [],\r\n    notificationsAvailable: false,\r\n    seenNotifications: false,\r\n    status: ['active', '', '', '', '']\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.props.userLoggedIn) {\r\n      const token = localStorage.getItem('access_token');\r\n      authorize(token).then(result => {\r\n        if (result.success) {\r\n          axios.get('/notify/notifications', {\r\n            params: {\r\n              username: result.user.username\r\n            }\r\n          })\r\n            .then(res => {\r\n              let cnt = 0;\r\n              let notifications = res.data;\r\n              for (let i = 0; i < notifications.length; i++) {\r\n                if (!notifications[i].seenStatus) {\r\n                  cnt++;\r\n                }\r\n              }\r\n              this.setState({\r\n                notifications: res.data,\r\n                notificationsAvailable: true,\r\n                nofNotifications: cnt\r\n              });\r\n            })\r\n          this.props.logInUser(result.user);\r\n        }\r\n        else {\r\n          if (result.remove) {\r\n            localStorage.removeItem('access_token');\r\n          }\r\n          this.props.history.push('/login');\r\n        }\r\n      });\r\n    } else {\r\n      axios.get('/notify/notifications', {\r\n        params: {\r\n          username: this.props.user.username\r\n        }\r\n      })\r\n        .then(res => {\r\n          let cnt = 0;\r\n          let notifications = res.data;\r\n          for (let i = 0; i < notifications.length; i++) {\r\n            if (!notifications[i].seenStatus) {\r\n              cnt++;\r\n            }\r\n          }\r\n          this.setState({\r\n            notifications: res.data,\r\n            notificationsAvailable: true,\r\n            nofNotifications: cnt\r\n          });\r\n        });\r\n    }\r\n    let key = this.props.location.state ? this.props.location.state.key : 0;\r\n    let status = [];\r\n    for (let i = 0; i < 5; i++) {\r\n      if (i == key) {\r\n        status.push('active');\r\n      } else {\r\n        status.push('');\r\n      }\r\n    }\r\n    this.setState({\r\n      status\r\n    });\r\n  }\r\n\r\n  logOut = (e) => {\r\n    e.preventDefault();\r\n    localStorage.removeItem('access_token');\r\n    this.props.logOutUser();\r\n    this.props.history.push('/login');\r\n  }\r\n\r\n  calcTime(timestamp) {\r\n    let x = new Date(timestamp);\r\n    let y = new Date();\r\n    let diff = (y.getTime() / 1000) - (x.getTime() / 1000);\r\n    let val;\r\n    if (diff < 3600) {\r\n      val = parseInt(diff / 60);\r\n      if (val != 1)\r\n        return val + ' minutes ago';\r\n      else\r\n        return val + ' minute ago';\r\n    }\r\n    if (diff < 86400) {\r\n      val = parseInt(diff / 3600);\r\n      if (val != 1)\r\n        return val + ' hours ago';\r\n      else\r\n        return val + ' hour ago';\r\n    }\r\n    else {\r\n      val = parseInt(diff / 86400);\r\n      if (val != 1)\r\n        return val + ' days ago';\r\n      else\r\n        return val + ' day ago';\r\n    }\r\n  }\r\n\r\n  getNotificationText = (notification) => {\r\n    if (notification.type === 'INTEREST') {\r\n      return (\r\n        <Link to={{pathname: '/sell', state: {key: 2}}} className=\"notification-element\">\r\n          <div className=\"notification-wrapper\">\r\n            <strong>{notification.sourceUsername}</strong> is interested in your item <strong>{notification.productName}</strong><br />\r\n            <small className=\"text-muted\">{this.calcTime(notification.timeStamp)}</small>\r\n          </div>\r\n        </Link>\r\n      );\r\n    } else if (notification.type === 'COMMENT') {\r\n      return (\r\n        <Link to=\"\" className=\"notification-element\">\r\n          <div className=\"notification-wrapper\">\r\n            <strong>{notification.sourceUsername}</strong> commented on your item <strong>{notification.productName}</strong> <br />\r\n            <small className=\"text-muted\">{this.calcTime(notification.timeStamp)}</small>\r\n          </div>\r\n        </Link>\r\n      );\r\n    } else if (notification.type === 'STATUS UPDATE') {\r\n      return (\r\n        <Link to={{pathname: '/user', state: {key: 4}}} className=\"notification-element\">\r\n          <div className=\"notification-wrapper\" onClick={this.directUser}>\r\n            <strong>{notification.sourceUsername + \"'s\"}</strong> item <strong>{notification.productName}</strong> is now  <strong>{notification.payload.status.toLowerCase()} </strong> <br />\r\n            <small className=\"text-muted\">{this.calcTime(notification.timeStamp)}</small>\r\n          </div>\r\n        </Link>\r\n      );\r\n    } else if (notification.type === 'SHARE CONTACT') {\r\n      return (\r\n        <Link to={{ pathname: '/user', state: { key: 4 } }} className=\"notification-element\">\r\n          <div className=\"notification-wrapper\" onClick={this.directUser}>\r\n            <strong>{notification.sourceUsername}</strong> has shared contact <br />\r\n            <small className=\"text-muted\">{this.calcTime(notification.timeStamp)}</small>\r\n          </div>\r\n        </Link>\r\n      );\r\n    }\r\n    return 'NA';\r\n  }\r\n\r\n  notificationHandler = (e) => {\r\n    if (this.state.seenNotifications) {\r\n      return;\r\n    }\r\n    axios.get('/notify/seen', {\r\n      params: {\r\n        username: this.props.user.username\r\n      }\r\n    })\r\n  }\r\n\r\n  render() {\r\n    let notifications = this.state.notificationsAvailable ? (\r\n      this.state.notifications.map((notification, index) => {\r\n        let unseen = notification.seenStatus ? '' : 'unseen';\r\n        return (\r\n          <div key={index}>\r\n            <div className=\"dropdown-divider\"></div>\r\n            <button className={\"dropdown-item notification-item\" + \" \" + unseen} type=\"button\">\r\n              {this.getNotificationText(notification)}\r\n            </button>\r\n          </div>\r\n        );\r\n      })\r\n    ) : ( '' );\r\n    // Default content when no notification is present\r\n    if (notifications && notifications.length === 0) {\r\n      notifications.push((\r\n        <div key=\"0\">\r\n          <div className=\"dropdown-divider\"></div>\r\n          <button className=\"dropdown-item notification-item\" type=\"button\">\r\n            <strong>No Notifications to show!</strong>\r\n          </button>\r\n        </div>\r\n      ));\r\n    }\r\n    return (\r\n      <nav className=\"navbar navbar-expand-sm bg-dark navbar-dark sticky-top\">\r\n        <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarToggler\" aria-controls=\"navbarTogglerDemo03\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n          <span className=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <img src=\"https://img.icons8.com/nolan/70/000000/shopping-cart.png\"/>\r\n        <div className=\"logoname\">\r\n        CampusCart\r\n        </div>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarToggler\">\r\n          <ul className=\"navbar-nav homenav\">\r\n            <li className={\"nav-item \" + this.state.status[0]}>\r\n              <Link to={{pathname: \"/\", state: {key: 0}}} className=\"nav-link\">Home</Link>\r\n            </li>\r\n            <li className={\"nav-item \" + this.state.status[1]}>\r\n              <Link to={{ pathname: \"/buy\", state: { key: 1 } }} className=\"nav-link\">Buy</Link>\r\n            </li>\r\n            <li className={\"nav-item \" + this.state.status[2]}>\r\n              <Link to={{ pathname: \"/sell\", state: { key: 2 } }} className=\"nav-link\">Sell</Link>\r\n            </li>\r\n            <li className={\"nav-item \" + this.state.status[3]}>\r\n              <Link to={{ pathname: \"/requirements\", state: { key: 3 } }} className=\"nav-link\">Requirements</Link>\r\n            </li>\r\n            <li className={\"nav-item \" + this.state.status[4]}>\r\n              <Link to={{ pathname: \"/user\", state: { key: 4 } }} className=\"nav-link\">User</Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a className=\"nav-link\" href=\"\" onClick={this.logOut}>Logout</a> { /* @debug: Float this to right */}\r\n            </li>\r\n            <li>\r\n              <div className=\"dropdown\">\r\n                <button className=\"btn btn-dark dropdown-toggle notification-dropdown-button\" type=\"button\"  data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" onClick={this.notificationHandler}>\r\n                  <img src=\"https://img.icons8.com/color/32/000000/appointment-reminders.png\" className=\"bell-img\" />({this.state.nofNotifications})\r\n                </button>\r\n                <div className=\"dropdown-menu notification-dropdown\">\r\n                  <h6 className=\"dropdown-header notification-item\">Notifications</h6>\r\n                  {notifications}\r\n                </div>\r\n              </div>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </nav>\r\n    )\r\n  }\r\n}\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    userLoggedIn: state.userLoggedIn,\r\n    user: state.user\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    logInUser: (user) => {\r\n      dispatch(logInUser(user)); // calling a dispatch action\r\n    },\r\n    logOutUser: () => {\r\n      dispatch(logOutUser());\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(HomeNav));"],"mappings":"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"},"metadata":{},"sourceType":"module"}